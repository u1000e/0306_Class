package com.kh.mvc.view;

import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.List;
import java.util.Scanner;

import com.kh.mvc.controller.UserController;
import com.kh.mvc.model.dto.UserDTO;

/**
 * MemberView í´ë˜ìŠ¤ëŠ” JDBCì‹¤ìŠµì„ ìœ„í•´ ìƒì„±í•˜ì˜€ìœ¼ë©°, ì‚¬ìš©ìì—ê²Œ ì…ë ¥ ë° ì¶œë ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
 * 
 * @author : ì¢…ë¡œ Cê°•ì˜ì¥
 * @version : 0.1
 * @date : 2025-03-04
 */
public class UserView {

	private Scanner sc = new Scanner(System.in);
	private UserController userController = new UserController();

	/**
	 * í”„ë¡œê·¸ë¨ ì‹œì‘ ì‹œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë©”ì¸í™”ë©´ì„ ì¶œë ¥í•´ì£¼ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤.
	 */
	public void mainMenu() {

		while (true) {
			System.out.println("--- USERí…Œì´ë¸” ê´€ë¦¬ í”„ë¡œê·¸ë¨ ---");
			System.out.println("1. íšŒì› ì „ì²´ ì¡°íšŒ");
			System.out.println("2. íšŒì› ì¶”ê°€");
			System.out.println("9. í”„ë¡œê·¸ë¨ ì¢…ë£Œ");
			System.out.print("ì´ìš©í•  ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš” > ");
			int menuNo = 0;
			
			try {
				menuNo = sc.nextInt();
			} catch (InputMismatchException e) {
				sc.nextLine();
				continue;
			}
			sc.nextLine();

			switch (menuNo) {
			case 1:
				findAll();
				break;
			case 2:
				
				break;
			case 9:
				System.out.println("í”„ë¡œê·¸ë¨ ì¢…ë£Œ~ğŸ‘»");
				return;
			default:
				System.out.println("ì˜ëª»ëœ ë©”ë‰´ ì„ íƒì…ë‹ˆë‹¤.");
			}

		}
	}

	// íšŒì› ì „ì²´ ì •ë³´ë¥¼ ì¡°íšŒí•´ì£¼ëŠ” ê¸°ëŠ¥
	private void findAll() {

		System.out.println("\n--- íšŒì› ì „ì²´ ëª©ë¡ì…ë‹ˆë‹¹ ---");
		// Controllerì•¼ ì©Œì–´ê¸° DBê°€ì„œ íšŒì› ì „ì²´ ëª©ë¡ ì¢€ ê°€ì ¸ì™€ì¤˜
		List<UserDTO> list = userController.findAll();
		
		System.out.println("\nì¡°íšŒëœ ì´ íšŒì›ì˜ ìˆ˜ëŠ” " + list.size() + "ëª… ì…ë‹ˆë‹¤.");
		if(!(list.isEmpty())) {
			System.out.println("==========================================");
			for(UserDTO user: list) {
				System.out.print(user.getUserName() + "ë‹˜ì˜ ì •ë³´ !");
				System.out.print("\nì•„ì´ë”” : " + user.getUserId());
				System.out.print("\tê°€ì…ì¼ : " + user.getEnrollDate());
				System.out.println();
			}
			System.out.println("==========================================");
		} else {
			System.out.println("íšŒì›ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
		}
	}
	
	/**
	 * TB_USERì— INSERTí•  ê°’ì„ ì‚¬ìš©ìì—ê²Œ ì…ë ¥ë°›ë„ë¡ ìœ ë„í•˜ëŠ” í™”ë©´
	 */
	private void insertUser() {
		
		System.out.println("--- íšŒì› ì¶”ê°€ í˜ì´ì§€ì…ë‹ˆë‹¤. ---");
		
		System.out.print("ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš” > ");
		while(true) {
			String userId = sc.nextLine();
			// UNIQUEí–ˆë‹¤ê³  ì¹˜ê³  ì…ë ¥ë°›ì€ ì•„ì´ë”” ê°€ì§€ê³  DBê°€ì„œ WHEREì¡°ê±´ì ˆì—ë‹¤ê°€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì•„ì´ë”” ë„£ì–´ì„œ
			// ì¡°íšŒ ê²°ê³¼ìˆìœ¼ë©´ í˜¼ì­ë‚´ì£¼ê¸°
			/*
			if(ì¡°íšŒê²°ê³¼ì¤‘ë³µì—†ìŒ) {
			   SELECT USER_ID FROM TB_USER WHERE USER_ID = ì‚¬ìš©ìê°€ì…ë ¥í•œ ì•„ì´ë””ê°’
				break;
			} 
			System.out.println("ì¤‘ë³µëœ ì•„ì´ë””ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
			*/
			// userId.matches("^[a-zA-Z]")
			/*
			if(userId.length() > 30) {
				System.out.println("ì•„ì´ë””ëŠ” 30ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			}
			*/
			break;
		}
		
		
		System.out.print("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” > ");
		String userPw = sc.nextLine();
		System.out.print("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” > ");
		String userName = sc.nextLine();
		
		userController.insertUser();
		
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

}
